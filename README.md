# ua-catalog
For uawebchallenge final backend

## Використовувались технології:
* Yii2 Framework
* MySql

## Для використання сайту:
* Папку з сайтом розмістити на сервері
* Створити базу даних ua-catalog
* Імпортувати в неї дані з файлу ua-catalog.sql, що знаходиться в корені сайту
* Налаштувати доступ до БД в файлі config/db.php (ввести у відповідних полях назву БД і пароль)
* В консолі - при встановленому Composer - запустити composer update
* Вхід на сайт - логін / пароль:  admin / 123456

## Зауваження - при порівнянні сайту, запущеного на локальному сервері та сайту запущеного із адреси
http://89.184.66.172:8885/ виявлено суттєві розбіжності які полягали у незавантаженні сторінок, проблем із
кодуванням символів. На нашу думку це відноситься до проблем з налаштуванням сервера.
У разі потреби готові надати ноутбук з локальним сервером із перевіреним робочим сайтом

## Виконання задач, поставлених у фіналі uawebchallenge

### Вибір міста - вибір продукту за містом, в якому він продається

Реалізовано можливість вибору міста за такою логікою:
Інформація про продукт зберігаєтсья в таблиці Product, інформація про магазини
зберігаєтсья в таблиці Shop. Ці дві таблиці повязані між собою через таблицю Shop_product.
Інформація про місто в якому розміщено магазин зберігається в полі sity таблиці Shop.
Функціонал вибору продукта за містом реалізовано так, що шукаються і виводяться всі продукти,
які продаються у магазинах, які розміщені у вибраному місті.
Логіка вибору за містом реалізована в моделі app\models\search\ProductCategorySearch
виведення фільтрів реалізоване в віджеті app\components\filterWidget\FilterWidget

### Вибір мови
Реалізовано можливість перекладу контенту сайту на будь-яку кількість мов таким чином:
* Перелік мов, що використовуються показано на сторінці http://ua-catalog/uk/web/admin/lang/*
* Додати нову мову можна на сторінці http://ua-catalog/uk/web/admin/lang/create - при цьому потрібно буде в папці
 messages/ХХ - і скопіювавши та вставивши сюди файли з папки messages/uk та переклавши їх
* Динамічний контент (тексти та заголовки продуктів, новин, категорій і т.д.) перекладаються шляхом створення на сторінці адміністрування
окремого запису в базі даних в таблиці (н.д. - product_lang, news_lang і т.д.) - тобто спочатку створюється основний запис українською
а потім - він перекладається потрібною кількістю мов.
В звязку з великим обсягом роботи перекладено на російську тільки статичний контент, а динамічний - вибірково.
* Статичний контент ("Створити новину", "Видалити сторінку" і т.д.) - реалізовано через
властивість фреймворку YII2 - всі ці переклади генеруються, перекладаються і зберігаються в папці
(наприклад) messages/ru/app.php

### Реалізувати карусель
На сайті реалізовано бекенд та виводяться на фронтенді два типи каруселі - на основній сторінці великі фото та
 на сторінці продукту - фото-додатки до цього конкретного продукту.
* Для роботи з каруселлю на основній сторінці використовується на бекенді сторінка http://ua-catalog/uk/web/admin/slider-up
На фронтенді елементи каруселі виводяться на головній сторінці циклом з бази даних -

* Для створення та відображення каруселі на сторінці продукту використовується на адмінці сторінка
http://ua-catalog/uk/web/admin/attachments/ для перегляду додаткових фото до продукта
та сторінка http://ua-catalog/uk/web/admin/attachments/create для створення додаткових фото для окремих продуктів

### Створити сторінку 404 за допомогою дизайнера та фронтенд розробника
На сайті підключено сторінку 404 згідно шаблону, наданого дизайнером

### Згідно завдання чемпіонату жодної нової серверної бібліотеки не підключалося

## Також оновлено в порівнянні з півфіналом:
* Поля фільтрів та сортування отримують позначки selected та checked
при виконанні відповідних запитів

* Доопрацьовано роботу віджету Основних категорій, який виводить список всіх категорій сайту із
вкладеними та посиланнями на виробника - тепер при переході на якусь основну категорію
розкривається перелік її підкатегорій другого та третього рівня а також всі виробники, які
відносяться до відповідних категорій третього рівня

## На сайті з часів півфіналу реалізовано такі основні можливості:

Модуль управління користувачами - користувачі можуть реєструватися, заповнювати свій профіль, відновлювати паролі і т.д.
Для цього використано додаткове розширення фреймворку - dektrium\user

Для сторінки адміністрування проекту використано сучасну тему AdminLte

Реалізовано віджет для випадання дерева категорій при наведенні на Логотип сайту. Список категорій всіх
рівнів виводиться правильно, однак була проблема з відображенням в браузері більшості категорій внаслідок нанашу
думку помилки з версткою - дещо відредаговано, однак для оптимальної роботи віджета треба ще змінювати CSS верстальщику

Результат пошуку через поле пошуку виводиться на окремі сторінці - так як шаблону верстки для цієї сторінки не було - його виконано тільки
для відображення результату, без дотримання дизайнерських рішень

Також більшість сторінок, шаблони верстки яких не були представлені
виконано в довільному стилі з метою тільки відображення контенту.

## Основні сутності, які реалізовано:

* Продукти
* Виробники
* Категорії
* Новини
* Записи блогу
* Події
* Колекції користувачів
* Магазини
* Статичні сторінки
* Користувачі
* Електронні адреси


